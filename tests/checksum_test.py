import unittest
import comfospot40

packets = [
    "555300980501022F0119C4",
    "5553009805010211020CEE",
    "555300980501024400E1E8",
    "555300980501023e00F0DF",
    "55530098050101370109CD",
    "5553009805010137010ACC",
]  # Sensor


packets += [
    "555300980500013300ddff",
    "555300980500023300ddfe",
    "555300980500023500e5f4",
    "555300980500023b00ddf6",
    "555300980500012500eefc",
    "555300980500012500effb",
    "555300980500012600eaff",
    "555300980500022600e9ff",
    "555300980500013100efef",
    "555300980500013700efe9",
    "555300980500013500eeec",
    "555300980500013300ecf0",
    "555300980500013100ebf3",
    "555300980500012e00eaf7",
    "555300980500012c00e9fa",
    "555300980500012b00e8fc",
    "555300980500012a00e7fe",
]

packets += [
    "555300980500023600498F",
    "5553009805000235004990",
    "555300980500023700498E",
]

packets += [
    "554D00960301020017",  # 1
    "554D00960300010019",  # 1
    "554D00970301020016",  # 1
    "554D00970300010018",
]  # 1   Niveau 0 out?
packets += [
    "554D009603010219FE",
    "554D00960300011BFE",
    "554D00970300011BFD",
    "554D009703010219FD",
]  # Niveau 1 out
packets += [
    "554D00970301022CEA",
    "554D00960300012FEA",
    "554D00960301022CEB",
    "554D00970300012FE9",
]  # Niveau 2 out
packets += [
    "554D00960301025DBA",
    "554D009603000163B6",
    "554D009703000163B5",
    "554D00970301025DB9",
]  # Niveau 4 out
packets += [
    "554D00960301023CDB",
    "554D00960300014ECB",
    "554D00970301023CDA",
    "554D00970300014ECA",
]  # Niveau 3 out

packets += [
    "554d00970300010018",
    "554d00970301020016",
    "554d00970302010016",
    "554d00970303020014",
    "554d00970304010014",
    "554d00970305020012",
    "554d00960300010019",
    "554d00960301020017",
    "554d00960302010017",
    "554d00960303020015",
    "554d00960304010015",
    "554d00960305020013",
]  # Niveau 0 out

packets += [
    "554d00960300012fea",
    "554d00960300022cec",
    "554d00960301012fe9",
    "554d00960301022ceb",
    "554d00960302012fe8",
    "554d00960302022cea",
    "554d00960303012fe7",
    "554d00960303022ce9",
    "554d00960304012fe6",
    "554d00960304022ce8",
    "554d00960305012fe5",
    "554d00960305022ce7",
    "554d00970300012fe9",
    "554d00970300022ceb",
    "554d00970301012fe8",
    "554d00970301022cea",
    "554d00970302012fe7",
    "554d00970302022ce9",
    "554d00970303012fe6",
    "554d00970303022ce8",
    "554d00970304012fe5",
    "554d00970304022ce7",
    "554d00970305012fe4",
    "554d00970305022ce6",
]  # Niveau 2


class TestChecksum(unittest.TestCase):
    def test_checksum(self):
        for packet in packets:
            with self.subTest(packet=packet):
                self.assertEqual(0, len(packet) % 2)
                msb = packet[::2]
                lsb = packet[1::2]
                packetbytes = [int("".join(x), 16) for x in zip(msb, lsb)]
                z = comfospot40.Packet(packetbytes)
                self.assertEqual(z.calculatecrc(z.data), 0)
